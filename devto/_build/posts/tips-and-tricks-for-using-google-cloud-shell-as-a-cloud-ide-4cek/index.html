<!DOCTYPE html>
<html lang="en">

<head>

	<meta charset="utf-8">
	<meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">
	<meta name="description" content="A list of all DEV.to posts by Tom Anderson (@ndsn)">
	<meta name="author" content="Thomas Anderson">

	<title></title>

</head>

<body>


<p class="meta">Published on Sun, 26 Jul 2020 17:16:58 +0000 <br/>by Tom Anderson</p>
<h2>Tips and Tricks for using Google Cloud Shell as a Cloud IDE</h2>
<div class="post-content">
  <blockquote>
<p><em>Already a fan of Google Cloud Shell? For just tips and tricks, without the introduction, click <a href="#tipstricks">here</a>.</em></p>
</blockquote>

<h1>
  <a href="#contents" class="anchor">
  </a>
  Contents
</h1>

<ul>
<li><a href="#introduction">Introduction</a></li>
<li>
<a href="#tipstricks">Tips and Tricks</a>

<ul>
<li><a href="#shortcuts">Shortcuts</a></li>
<li><a href="#customisation">Customisation</a></li>
</ul>


</li>
<li><a href="#wrappingup">Wrapping Up</a></li>
</ul>

<h1>
  <a href="#introduction" class="anchor">
  </a>
  Introduction <a></a>
</h1>

<h2>
  <a href="#context" class="anchor">
  </a>
  Context
</h2>

<p>At the start of 2020, I made the decision to use a Chromebook as my primary device and move to SaaS/web-based tools permanently. If it's something you're considering - I'd <em>highly</em> recommend it and there are tons of articles on the web outlining why you should and how you can make the transition.</p>

<p>For me the reason was simple: <strong>The Browser &gt; A Device</strong>.</p>

<p>But one thing that I really struggled with for a long-time was having a cloud-based replacement for my development environment. The problem can be addressed in a number of different ways though, and I would highly recommend reading the following for more in-depth views on the topics:</p>


<div class="ltag__link">
  <a href="https://medium.com/better-programming/my-favorite-cloud-ides-e6afaa94d96b" class="ltag__link__link">
    <div class="ltag__link__pic">
      <img src="https://res.cloudinary.com/practicaldev/image/fetch/s--Q7V0DA-j--/c_limit%2Cf_auto%2Cfl_progressive%2Cq_auto%2Cw_880/https://miro.medium.com/fit/c/96/96/2%2AxCAj_hHhMUomcf9RXcTG9Q.png" alt="David Kramer">
    </div>
  </a>
  <a href="https://medium.com/better-programming/my-favorite-cloud-ides-e6afaa94d96b" class="ltag__link__link">
    <div class="ltag__link__content">
      <h2>My Favorite Cloud IDEs. Eliminate the hassle of managing… | by David Kramer | Better Programming | Medium</h2>
      <h3>David Kramer ・ <time>Mar 3, 2020</time> ・ 6 min read
      <div class="ltag__link__servicename">
        <img src="https://res.cloudinary.com/practicaldev/image/fetch/s--KBvj_QRD--/c_limit%2Cf_auto%2Cfl_progressive%2Cq_auto%2Cw_880/https://practicaldev-herokuapp-com.freetls.fastly.net/assets/medium_icon-90d5232a5da2369849f285fa499c8005e750a788fdbf34f5844d5f2201aae736.svg" alt="Medium Logo">
        Medium
      </div>
    </h3>
</div>
  </a>
</div>



<div class="ltag__link">
  <a href="/mikenikles" class="ltag__link__link">
    <div class="ltag__link__pic">
      <img src="https://res.cloudinary.com/practicaldev/image/fetch/s--fHFNySef--/c_limit%2Cf_auto%2Cfl_progressive%2Cq_auto%2Cw_880/https://res.cloudinary.com/practicaldev/image/fetch/s--nns0HiuG--/c_fill%2Cf_auto%2Cfl_progressive%2Ch_150%2Cq_auto%2Cw_150/https://dev-to-uploads.s3.amazonaws.com/uploads/user/profile_image/249655/caa17aa9-9b30-43f0-974b-9cd1dc06f89f.png" alt="mikenikles image">
    </div>
  </a>
  <a href="/mikenikles/why-i-use-a-cloud-based-development-environment-and-how-you-can-too-4l8a" class="ltag__link__link">
    <div class="ltag__link__content">
      <h2>Why I use a cloud-based development environment and how you can too</h2>
      <h3>Mike Nikles ・ Mar 31 ・ 5 min read</h3>
      <div class="ltag__link__taglist">
        <span class="ltag__link__tag">#productivity</span>
        <span class="ltag__link__tag">#ide</span>
        <span class="ltag__link__tag">#editor</span>
        <span class="ltag__link__tag">#vscode</span>
      </div>
    </div>
  </a>
</div>



<div class="ltag__link">
  <a href="/svenefftinge" class="ltag__link__link">
    <div class="ltag__link__pic">
      <img src="https://res.cloudinary.com/practicaldev/image/fetch/s--DQaL5WWf--/c_limit%2Cf_auto%2Cfl_progressive%2Cq_auto%2Cw_880/https://res.cloudinary.com/practicaldev/image/fetch/s--ySfGXjlU--/c_fill%2Cf_auto%2Cfl_progressive%2Ch_150%2Cq_auto%2Cw_150/https://dev-to-uploads.s3.amazonaws.com/uploads/user/profile_image/118823/f46f3cbe-ec88-4ccf-be31-f06490aa1bc9.jpeg" alt="svenefftinge image">
    </div>
  </a>
  <a href="/svenefftinge/theia-1-0-finally-a-good-browser-ide-3ok0" class="ltag__link__link">
    <div class="ltag__link__content">
      <h2>Theia 1.0 - Finally a Good Browser IDE</h2>
      <h3>Sven Efftinge ・ Mar 31 ・ 5 min read</h3>
      <div class="ltag__link__taglist">
        <span class="ltag__link__tag">#productivity</span>
        <span class="ltag__link__tag">#vscode</span>
        <span class="ltag__link__tag">#opensource</span>
        <span class="ltag__link__tag">#devops</span>
      </div>
    </div>
  </a>
</div>





<p>So what did I land on? <strong><a href="https://cloud.google.com/shell">Google Cloud Shell</a></strong></p>

<p>Why? It's basically a <strong>free Linux development machine</strong> accessed through the web browser or a mobile app.</p>

<p>Is it perfect? Will it work for every developer? <strong>No.</strong></p>

<p>While alternatives exist, I find the flexibility and accessibility of Google Cloud Shell to be superior for my workflows than the likes of <a href="https://codesandbox.io">CodeSandbox</a> or <a href="https://gitpod.io">GitPod</a>.</p>

<p>So let's move onto what Google Cloud Shell actually is, and what we get for our low, low price of £0 p/m.</p>




<h2>
  <a href="#what-is-google-cloud-shell" class="anchor">
  </a>
  What is Google Cloud Shell?
</h2>

<p><a href="https://cloud.google.com/shell">Google Cloud Shell</a> is essentially a web-based interface to an ephemeral Linux virtual machine hosted in the Google Cloud Platform.</p>

<p>More specifically, <a href="https://cloud.google.com/shell/docs/how-cloud-shell-works">Google provides you</a> with an <a href="https://cloud.google.com/compute/docs/machine-types#e2_shared-core_machine_types">e2-small</a> Linux virtual machine with 2 vCPU cores (limited to 25% <a href="https://wikipedia.org/wiki/CPU_time">CPU Time</a>, but burstable) and 2GB RAM and a 1Gbps (125MB/s download/upload) network connection.</p>

<p>And if that's not enough for your workloads, you can <em>"boost"</em> your Cloud Shell machine which will re-provision all sessions for the following 24 hours on an <a href="https://cloud.google.com/compute/docs/machine-types#e2_shared-core_machine_types">e2-medium</a> instance type instead. This boosts the 2 vCPU cores to 50% <a href="https://wikipedia.org/wiki/CPU_time">CPU Time</a> and doubles both the RAM (to 4GB) and the network connection (to 2Gbps/250MB/s). </p>

<p><em>Note: Use boost only when you need! You are subject to certain <a href="https://cloud.google.com/shell/docs/limitations#usage_limits">"limits"</a>.</em>  </p>

<p>Not bad! The catch?</p>

<p><strong><em>The VM only lasts for the life of the session and gets deleted an hour after you leave the session.</em></strong></p>

<p>Okay fair enough, what about storage?</p>

<p>That's where things get interesting, from the docs:</p>

<blockquote>
<p>Cloud Shell provisions 5 GB of free persistent disk storage mounted as your <code>$HOME</code> directory on the virtual machine instance. This storage is on a per-user basis and is available across projects. <strong>All files you store in your home directory</strong>, including installed software, scripts and user configuration files like .bashrc and .vimrc, <strong>persist between sessions</strong>.</p>
</blockquote>

<p>So when the virtual machine gets terminated and discarded, your $HOME directory <strong>does not</strong>. </p>

<p>This means that anything you configure, install or store in your $HOME directory can be used every time you load up Cloud Shell, but anything outside of that directory is wiped away.</p>

<p><strong><em>This is very powerful if used correctly.</em></strong></p>

<p>For instance, imagine you want to clone and work on your favourite GitHub repo: </p>

<ol>
<li>Clone that repo into <code>/tmp/my-project</code> and when the VM is discarded and deleted, those files will be gone. </li>
<li>Clone it into <code>$HOME/my-project</code> and you can access those files over and over again.</li>
</ol>

<p>Flexibility is a powerful thing! (Within the <a href="https://cloud.google.com/shell/docs/limitations#usage_limits">limits</a> of course!)</p>

<p>So how do you access it? Through the web browser. </p>

<p>But there are a few things you need to do beforehand:</p>

<ol>
<li>Sign-up/Sign-in to a <a href="https://accounts.google.com/SignUp">Google Account</a>
</li>
<li>Access the <a href="http://console.cloud.google.com/">Google Cloud Platform Console</a>
</li>
<li>Click on the "Activate Cloud Shell" icon.
<img src="https://res.cloudinary.com/practicaldev/image/fetch/s--jx3qMbw---/c_limit%2Cf_auto%2Cfl_progressive%2Cq_auto%2Cw_880/https://dev-to-uploads.s3.amazonaws.com/i/5pg8dgg6aefudebwmksh.png" alt="Activate Cloud Shell">
</li>
</ol>

<p>Once it loads up you'll be presented with the two parts of Google Cloud Shell:</p>

<ol>
<li>The terminal.</li>
<li>The Theia-based Code Editor.</li>
</ol>

<p>But that's not the only way to access it - there's also a <a href="https://cloud.google.com/console-app">mobile application</a> for iOS and Android. </p>

<p>So you can access it from literally anywhere!</p>

<p>And it's that flexibility and accessibility that has driven me to write these tips and tricks. You can do a <em>lot</em> with Google Cloud Shell if you're willing to spend some time with it.</p>

<p>So, onto my tips and tricks!</p>




<h1>
  <a href="#tips-and-tricks" class="anchor">
  </a>
  Tips and Tricks <a></a>
</h1>

<h2>
  <a href="#shortcuts" class="anchor">
  </a>
  Shortcuts <a></a>
</h2>

<p>Accessing Cloud Shell through the Cloud console is not the only way you can get to it!</p>




<h3>
  <a href="#open-cloud-shell-directly" class="anchor">
  </a>
  Open Cloud Shell Directly
</h3>

<p>Here's a link to open Google Cloud Shell directly in its own tab:<br>
</p>

<div class="highlight"><pre class="highlight plaintext"><code>https://console.cloud.google.com/cloudshell/editor?cloudshell=true&amp;shellonly=true
</code></pre></div>


<p><em>Note: The '&amp;shellonly=true' means 'Don't open the code editor'</em></p>


<h3>
  <a href="#open-cloud-shell-code-editor-directly" class="anchor">
  </a>
  Open Cloud Shell Code Editor Directly
</h3>

<p>If you want to open <strong>just</strong> the code editor <em>without</em> the terminal:<br>
</p>
<div class="highlight"><pre class="highlight plaintext"><code>https://ssh.cloud.google.com/devshell/proxy?authuser=0&amp;port=970&amp;cloudshell_retry=true&amp;devshellProxyPath=%2F&amp;environment_name=default&amp;environment_id=default
</code></pre></div>


<p><em>Note: If your Cloud Shell VM isn't active, this link won't work!</em><br>
<em>Tip: Append <code>#/path/to/directory</code> to the URL to open that directory in the editor!</em> </p>


<h3>
  <a href="#clone-a-github-repo-via-its-url" class="anchor">
  </a>
  Clone a GitHub Repo via its URL.
</h3>

<p>Much like the way GitPod behaves, you can clone any GitHub or BitBucket repository automatically through visiting a specific URL:<br>
</p>
<div class="highlight"><pre class="highlight plaintext"><code>https://ssh.cloud.google.com/cloudshell/editor?shellonly=true&amp;cloudshell_git_repo={URL LINK TO REPO}
</code></pre></div>


<p><em>Note: Cloud Shell will clone any repo into the <code>$HOME/cloudshell_open</code> directory.</em><br>
<em>Hint: Other parameters for this URL can be found on <a href="https://cloud.google.com/shell/docs/open-in-cloud-shell">this page</a>.</em></p>


<h3>
  <a href="#clone-the-github-repo-from-the-repo-itself" class="anchor">
  </a>
  Clone the GitHub Repo from the repo itself
</h3>

<p>Or, if you add the following bookmark to your bookmarks bar, it will automatically take the URL of the page you are on and clone that.<br>
</p>
<div class="highlight"><pre class="highlight javascript"><code><span class="nx">javascript</span><span class="p">:{</span><span class="nb">window</span><span class="p">.</span><span class="nx">location</span><span class="o">=</span><span class="dl">'</span><span class="s1">https://ssh.cloud.google.com/cloudshell/editor?shellonly=true&amp;cloudshell_git_repo=</span><span class="dl">'</span><span class="o">+</span><span class="nb">encodeURIComponent</span><span class="p">(</span><span class="nb">window</span><span class="p">.</span><span class="nx">location</span><span class="p">.</span><span class="nx">href</span><span class="p">)}</span>
</code></pre></div>



<h3>
  <a href="#add-a-clone-this-in-cloud-shell-badge-to-your-repo" class="anchor">
  </a>
  Add a 'Clone this in Cloud Shell' badge to your repo
</h3>

<p>You can also embed a <a href="https://shields.io">Shields.io</a> badge to our repo's README to allow others to automatically clone the repo to their Cloud Shell.</p>

<p><a href="https://ssh.cloud.google.com/cloudshell/editor?cloudshell_git_repo=https://github.com/driminary/driminary.git&amp;shellonly=true"><img src="https://res.cloudinary.com/practicaldev/image/fetch/s--LNYGoExl--/c_limit%2Cf_auto%2Cfl_progressive%2Cq_auto%2Cw_880/https://img.shields.io/badge/Google%2520Cloud%2520Shell-Clone-5391FE%3Fstyle%3Dfor-the-badge%26logo%3Dgnu-bash%26logoColor%3Dwhite" alt="Open in Cloud Shell"></a><br>
</p>
<div class="highlight"><pre class="highlight plaintext"><code>[![Open in Cloud Shell](https://img.shields.io/badge/Google%20Cloud%20Shell-Clone-5391FE?style=for-the-badge&amp;logo=gnu-bash&amp;logoColor=white)](https://ssh.cloud.google.com/cloudshell/editor?cloudshell_git_repo=***{REPO URL HERE}***&amp;shellonly=true)
</code></pre></div>



<h2>
  <a href="#customisation" class="anchor">
  </a>
  Customisation <a></a>
</h2>

<p>For those who want to change the look and feel of Cloud Shell or want to really stretch the boundaries of what it can do, there are a few things we can change:</p>


<h3>
  <a href="#custom-startup-script-customizeenvironment" class="anchor">
  </a>
  Custom Startup Script (.customize_environment)
</h3>

<p>If you find yourself needing tools or packages that aren't included in the list of packages that Cloud Shell has pre-installed, create a file called <code>.customize_environment</code> in your <code>$HOME</code> directory.</p>

<p>As described in the <a href="https://cloud.google.com/shell/docs/configuring-cloud-shell#environment_customization">docs</a>, this script is run as root when the VM <strong>is created</strong>.</p>

<p>You could install packages, make configuration changes or just remove some of the things Google bakes into the image.</p>

<p>When the script completes, the file <code>/google/devshell/customize_environment_done</code> is created. Log output is available at <code>/var/log/customize_environment</code>.</p>


<h3>
  <a href="#remove-the-google-signin-message" class="anchor">
  </a>
  Remove the Google sign-in message
</h3>

<p>On every login to Cloud Shell, you will see the following:</p>

<blockquote>
<p>Welcome to Cloud Shell. Type "help" to get started.</p>
</blockquote>

<p>This is part of the <code>init_help.sh</code> script located at <code>/etc/profile.d/init_help.sh</code> that runs on every login. </p>

<p>Unfortunately, to stop this message appearing on every login we need to delete this file as part of our <code>.customize_environment</code> script. (See below)</p>


<h3>
  <a href="#stop-readmecloudshelltxt-being-recreated" class="anchor">
  </a>
  Stop README-cloudshell.txt being recreated
</h3>

<p>If you delete the README-cloudshell.txt file from your $HOME directory, you will notice that Google helpfully recreates it the next time we log in.</p>

<p>This is part of the <code>init_help.sh</code> script located at <code>/etc/profile.d/init_help.sh</code> that runs on every login. </p>

<p>Unfortunately, to stop this message appearing on every login we need to delete this file as part of our <code>.customize_environment</code> script. (See below)</p>


<h3>
  <a href="#remove-the-inithelpsh-script" class="anchor">
  </a>
  Remove the init_help.sh script
</h3>

<p>To remove the <code>/etc/profile.d/init_help.sh</code> script and stop the above two behaviours, add the following to your <code>.customize_environment</code> file:<br>
</p>
<div class="highlight"><pre class="highlight shell"><code><span class="c">#!/bin/sh</span>

<span class="c"># File to remove</span>
<span class="nv">file</span><span class="o">=</span><span class="s2">"/etc/profile.d/init_help.sh"</span>

<span class="k">if</span> <span class="o">[</span> <span class="nt">-f</span> <span class="nv">$file</span> <span class="o">]</span> <span class="p">;</span> <span class="k">then
    </span><span class="nb">rm</span> <span class="nv">$file</span>
<span class="k">fi</span>
</code></pre></div>


<p><em>Note: Deleting this file will also delete the messages that tell you which GCP project you have selected. You can see how to add these back in with the "customise the login message" tip.</em><br>
<em>Note: This also removes the 'help' alias.</em></p>


<h3>
  <a href="#customise-the-login-message" class="anchor">
  </a>
  Customise the login message
</h3>

<p>To add a custom welcome message, you just need to copy in a bash script to <code>/etc/profile.d/</code> that will get executed on login. </p>

<p>However, when the script runs it does not have access to the <code>$HOME</code> directory so any scripts will need to be hosted externally.</p>

<p>Add code similar to this to your <code>.customize_environment</code> file:<br>
</p>
<div class="highlight"><pre class="highlight shell"><code><span class="c">#!/bin/sh</span>
<span class="nb">echo</span> <span class="s1">'Getting custom login message script...'</span>
wget <span class="nt">-P</span> /etc/profile.d/ https://URL/path/to/your/init_welcome.sh
<span class="nb">chmod</span> +x /etc/profile.d/init_welcome.sh
</code></pre></div>


<p><em>Note: Replace <code>URL/path/to/your/init_welcome.sh</code> script with a publicly accessible bash script.</em></p>

<p>As an example, this is the bash script I use for my login:</p>


<div class="ltag_gist-liquid-tag">
  
</div>



<p><em>Hint: Lines 8-13 will print out the current GCP project, exactly as in the original init_help.sh script.</em></p>

<p>This means my Cloud Shell login looks like this:</p>

<p><a href="https://res.cloudinary.com/practicaldev/image/fetch/s--RuPu3onI--/c_limit%2Cf_auto%2Cfl_progressive%2Cq_auto%2Cw_880/https://dev-to-uploads.s3.amazonaws.com/i/wg4psks0095bmvergbpr.png" class="article-body-image-wrapper"><img src="https://res.cloudinary.com/practicaldev/image/fetch/s--RuPu3onI--/c_limit%2Cf_auto%2Cfl_progressive%2Cq_auto%2Cw_880/https://dev-to-uploads.s3.amazonaws.com/i/wg4psks0095bmvergbpr.png" alt="My Cloud Shell Login"></a></p>




<h3>
  <a href="#customise-bash-prompt-and-keep-gcp-project-functionality" class="anchor">
  </a>
  Customise bash prompt (and keep GCP project functionality)
</h3>

<p>As with any Linux environment, you can customise the Bash prompt to add any number of things by changing the PS1 variable. In Google Cloud Shell, the PS1 variable is set by the <code>/google/devshell/bashrc.google</code> file on login, which is referenced by your <code>$HOME/.bashrc</code> file.</p>

<p><strong><em>Note: This file contains a number of Cloud Shell-specific settings so I wouldn't recommend removing this source from your .bashrc.</em></strong></p>

<p>To replace the prompt format, set the PS1 variable <strong>after</strong> the <code>source "/google/devshell/bashrc.google"</code> block.</p>

<p>If like me, you want to augment or modify the existing prompt, add the following to the end of your <code>.bashrc</code>:<br>
</p>

<div class="highlight"><pre class="highlight shell"><code><span class="nb">export </span><span class="nv">PS1</span><span class="o">=</span><span class="s1">'🌀 \e[1m\033[38;5;202m\]\u@ndsn-shell \e[0m\[\033[00m\]in \e[1m\[\033[1;34m\]\w\e[0m$([[ -n $DEVSHELL_PROJECT_ID ]] &amp;&amp; printf " \[\033[1;33m\](%s)" ${DEVSHELL_PROJECT_ID} )\[\033[00m\]'</span>
<span class="k">if</span> <span class="o">[[</span> <span class="nt">-n</span> <span class="nv">$TMUX</span> <span class="o">]]</span><span class="p">;</span> <span class="k">then
  </span><span class="nb">export </span>PS1+<span class="o">=</span><span class="s1">'\[\033k$([[ -n $DEVSHELL_PROJECT_ID ]] &amp;&amp; printf "(%s)" ${DEVSHELL_PROJECT_ID} || printf "cloudshell")\033\\\]'</span>
<span class="k">fi
</span><span class="nb">export </span>PS1+<span class="o">=</span><span class="s2">"</span><span class="se">\0</span><span class="s2">33[38;5;2m</span><span class="se">\]\$</span><span class="s2">(__git_ps1 ' [⎇ %s]')</span><span class="se">\[\0</span><span class="s2">33[00m</span><span class="se">\]</span><span class="s2"> ↣ "</span>
</code></pre></div>



<p>Which results in:<br>
</p>

<div class="highlight"><pre class="highlight plaintext"><code>🌀 me@ndsn-shell in /my/path (gcp-project-name) [⎇ master] ↣
</code></pre></div>



<p>Screenshot:<br>
<a href="https://res.cloudinary.com/practicaldev/image/fetch/s--GD6XVMBl--/c_limit%2Cf_auto%2Cfl_progressive%2Cq_auto%2Cw_880/https://dev-to-uploads.s3.amazonaws.com/i/stumsn6vi20zkse0ne83.png" class="article-body-image-wrapper"><img src="https://res.cloudinary.com/practicaldev/image/fetch/s--GD6XVMBl--/c_limit%2Cf_auto%2Cfl_progressive%2Cq_auto%2Cw_880/https://dev-to-uploads.s3.amazonaws.com/i/stumsn6vi20zkse0ne83.png" alt="My Cloud Shell Prompt"></a></p>


<h3>
  <a href="#install-chromium-dependencies-for-headless-browser-testing" class="anchor">
  </a>
  Install Chromium dependencies (for headless browser testing)
</h3>

<p>I like to use puppeteer for headless browser testing, but when it tries to download and use Chromium there are a lot of dependencies that aren't installed by default. Install them with:<br>
</p>

<div class="highlight"><pre class="highlight shell"><code><span class="nb">sudo </span>apt-get <span class="nb">install </span>gconf-service libasound2 libatk1.0-0 libatk-bridge2.0-0 libc6 libcairo2 libcups2 libdbus-1-3 libexpat1 libfontconfig1 libgcc1 libgconf-2-4 libgdk-pixbuf2.0-0 libglib2.0-0 libgtk-3-0 libnspr4 libpango-1.0-0 libpangocairo-1.0-0 libstdc++6 libx11-6 libx11-xcb1 libxcb1 libxcomposite1 libxcursor1 libxdamage1 libxext6 libxfixes3 libxi6 libxrandr2 libxrender1 libxss1 libxtst6 ca-certificates fonts-liberation libappindicator1 libnss3 lsb-release xdg-utils wget
</code></pre></div>



<p><em>Note: Source: <a href="https://github.com/puppeteer/puppeteer/blob/main/docs/troubleshooting.md#chrome-headless-doesnt-launch-on-unix">Puppeteer Troubleshooting</a></em></p>




<h3>
  <a href="#install-codeserver-webbased-vscode" class="anchor">
  </a>
  Install code-server (Web-based VSCode)
</h3>

<p>While the Theia-based code editor that comes with Cloud Shell is <em>okay</em>, it doesn't support much modification. You can't add plugins for other languages and you don't have any nice git integration.</p>

<p>A while ago, Christian Hees outlined in a <a href="https://medium.com/google-cloud/how-to-run-visual-studio-code-in-google-cloud-shell-354d125d5748">Medium post</a> how it was possible to install and run code-server (web-based VSCode) on Google Cloud Shell. This meant that we could extend our code editing capabilities within Cloud Shell and allowed us to extend the use-cases for which it was useful.</p>

<p>His steps were simple and still work, but there is now an even quicker way to install and run code-server from the <a href="https://github.com/cdr/code-server#quick-install">official docs</a>:<br>
</p>

<div class="highlight"><pre class="highlight shell"><code>curl <span class="nt">-fsSL</span> https://code-server.dev/install.sh | sh <span class="nt">-s</span> <span class="nt">--</span> <span class="nt">--method</span><span class="o">=</span>standalone
<span class="nv">PATH</span><span class="o">=</span><span class="s2">"</span><span class="nv">$HOME</span><span class="s2">/.local/bin:</span><span class="nv">$PATH</span><span class="s2">"</span>
</code></pre></div>



<p>Which installs to <code>$HOME/.local</code>. Then to start the application you can just run <code>code-server --auth=none</code>.</p>

<p><em>Note: Having <code>code-server</code> on your PATH may not persist across sessions, so you may need to periodically run <code>PATH="$HOME/.local/bin:$PATH"</code> to get the <code>code-server</code> command to work.</em> </p>

<p><em>Hint: While perfectly usable in normal mode, use Boost Mode (above) to get a snappier experience.</em> </p>

<p>I like to change the <code>~/.config/code-server/config.yml</code> to the following:<br>
</p>

<div class="highlight"><pre class="highlight yaml"><code><span class="na">bind-addr</span><span class="pi">:</span> <span class="s">127.0.0.1:5000</span>
<span class="na">auth</span><span class="pi">:</span> <span class="s">none</span>
<span class="na">cert</span><span class="pi">:</span> <span class="no">false</span>
</code></pre></div>



<p>Which changes the port to 5000 and disables the authentication (since Cloud Shell handles this).</p>

<p><em>Note: There is an open issue with code-server at the moment that prevents GitHub sign-in. See <a href="https://github.com/cdr/code-server/issues/1883">here</a> for more details and a workaround.</em></p>




<h1>
  <a href="#wrapping-up" class="anchor">
  </a>
  Wrapping Up <a></a>
</h1>

<p>I hope that some of these tips and tricks will enable you to make Google Cloud Shell work for your particular workflow.</p>

<p>While it may not be a suitable cloud development environment for all workloads, it is totally free and with a little customisation can be a powerful extension to your productivity toolset.</p>

<h2>
  <a href="#let-me-know-what-you-think" class="anchor">
  </a>
  Let me know what you think!
</h2>

<ul>
<li>Did any these tips or tricks help?</li>
<li>Any other tips or tricks that you have for Google Cloud Shell?</li>
<li>What do you use for your Cloud Development Environment?</li>
</ul>




<p>🧡 Tom Anderson<br>
<a href="http://www.thomas-anderson.net">www.thomas-anderson.net</a><br>
<em>Liked something I did and want to help me out?</em><br>
<a href="https://www.buymeacoffee.com/ndsn"><img src="https://res.cloudinary.com/practicaldev/image/fetch/s--3lkhkJJp--/c_limit%2Cf_auto%2Cfl_progressive%2Cq_auto%2Cw_880/https://img.shields.io/badge/Buy%2520me%2520a%2520coffee-orange%3Flogo%3DBuy%2520Me%2520A%2520Coffee%26logoColor%3Dwhite" alt="Buy me a coffee"></a></p>
</div>

</body>

</html>